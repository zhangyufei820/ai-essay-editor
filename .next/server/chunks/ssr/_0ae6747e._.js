module.exports=[83694,a=>{"use strict";var b=a.i(8398),c=a.i(11523),d=a.i(81934);function e(){let e=(0,d.useRouter)(),f=(0,d.useSearchParams)(),g="692b0bd30de159be78db726b",h=(0,c.useRef)(null),[i,j]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{if(localStorage.getItem("currentUser")){let a=f.get("redirect");e.replace(a||"/");return}if(h.current)return;let b=document.createElement("link");b.rel="stylesheet",b.href="https://cdn.authing.co/packages/guard/latest/guard.min.css",document.head.appendChild(b),a.A(9018).then(a=>{let b=a.Guard;if(!h.current)try{let a=new b({appId:g,mode:"normal"});a.on("login",async a=>{let b=a.data||a;localStorage.setItem("currentUser",JSON.stringify(b));try{await fetch("/api/auth/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:b.id||b.sub,email:b.email,nickname:b.nickname||b.username,avatar:b.photo,phone:b.phone||b.phone_number})})}catch(a){console.error("同步失败",a)}let c=f.get("redirect");c?e.replace(decodeURIComponent(c)):e.replace("/")}),a.start("#authing-guard-container"),h.current=a,j(!0)}catch(a){console.error("Authing Guard 初始化失败:",a),j(!0)}}).catch(a=>{console.error("加载 Authing 模块失败:",a),j(!0)})},[g,e,f]),(0,b.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:[(0,b.jsx)("div",{id:"authing-guard-container",style:{minHeight:"500px"}}),!i&&(0,b.jsx)("p",{style:{color:"#666",marginTop:"20px"},children:"正在加载安全登录组件..."})]})}function f(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"加载中..."}),children:(0,b.jsx)(e,{})})}a.s(["default",()=>f])},9018,a=>{a.v(b=>Promise.all(["server/chunks/ssr/59131_@authing_guard_dist_esm_guard_min_86a93c2c.js"].map(b=>a.l(b))).then(()=>b(29792)))}];

//# sourceMappingURL=_0ae6747e._.js.map