(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89954,e=>{"use strict";var t=e.i(62893),r=e.i(58846),n=e.i(78824);function a(){let a=(0,n.useRouter)(),c=(0,n.useSearchParams)(),i="692b0bd30de159be78db726b",l=(0,r.useRef)(null),[s,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(localStorage.getItem("currentUser")){let e=c.get("redirect");a.replace(e||"/");return}if(l.current)return;let t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn.authing.co/packages/guard/latest/guard.min.css",document.head.appendChild(t),e.A(40227).then(e=>{let t=e.Guard;if(!l.current)try{let e=new t({appId:i,mode:"normal"});e.on("login",async e=>{let t=e.data||e;localStorage.setItem("currentUser",JSON.stringify(t));try{await fetch("/api/auth/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.id||t.sub,email:t.email,nickname:t.nickname||t.username,avatar:t.photo,phone:t.phone||t.phone_number})})}catch(e){console.error("同步失败",e)}let r=c.get("redirect");r?a.replace(decodeURIComponent(r)):a.replace("/")}),e.start("#authing-guard-container"),l.current=e,o(!0)}catch(e){console.error("Authing Guard 初始化失败:",e),o(!0)}}).catch(e=>{console.error("加载 Authing 模块失败:",e),o(!0)})},[i,a,c]),(0,t.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:[(0,t.jsx)("div",{id:"authing-guard-container",style:{minHeight:"500px"}}),!s&&(0,t.jsx)("p",{style:{color:"#666",marginTop:"20px"},children:"正在加载安全登录组件..."})]})}function c(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"加载中..."}),children:(0,t.jsx)(a,{})})}e.s(["default",()=>c])},40227,e=>{e.v(t=>Promise.all(["static/chunks/c25748fda87814bb.js"].map(t=>e.l(t))).then(()=>t(85223)))}]);