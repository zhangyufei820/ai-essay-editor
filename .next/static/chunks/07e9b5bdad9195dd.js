(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(62893),s=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>r,"CardTitle",()=>i])},90768,e=>{"use strict";let t=(0,e.i(10965).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],90768)},86591,e=>{"use strict";let t=(0,e.i(10965).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],86591)},87524,e=>{"use strict";let t=(0,e.i(10965).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],87524)},35301,e=>{"use strict";let t=(0,e.i(10965).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],35301)},94179,e=>{"use strict";var t=e.i(62893),s=e.i(84739),a=e.i(94237),r=e.i(47163);let i=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,asChild:n=!1,...l}){let o=n?s.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,r.cn)(i({variant:a}),e),...l})}e.s(["Badge",()=>n])},58595,e=>{"use strict";let t=(0,e.i(10965).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],58595)},46621,e=>{"use strict";var t=e.i(58846);e.i(62893);var s=t.createContext(void 0);function a(e){let a=t.useContext(s);return e||a||"ltr"}e.s(["useDirection",()=>a])},84762,e=>{"use strict";var t=e.i(62893),s=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},59301,e=>{"use strict";var t=e.i(58846),s=e.i(17534),a=e.i(11282),r=e.i(84739),i=e.i(62893);function n(e){let n=e+"CollectionProvider",[l,o]=(0,s.createContextScope)(n),[d,c]=l(n,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:s,children:a}=e,r=t.default.useRef(null),n=t.default.useRef(new Map).current;return(0,i.jsx)(d,{scope:s,itemMap:n,collectionRef:r,children:a})};u.displayName=n;let m=e+"CollectionSlot",x=t.default.forwardRef((e,t)=>{let{scope:s,children:n}=e,l=c(m,s),o=(0,a.useComposedRefs)(t,l.collectionRef);return(0,i.jsx)(r.Slot,{ref:o,children:n})});x.displayName=m;let p=e+"CollectionItemSlot",f="data-radix-collection-item",h=t.default.forwardRef((e,s)=>{let{scope:n,children:l,...o}=e,d=t.default.useRef(null),u=(0,a.useComposedRefs)(s,d),m=c(p,n);return t.default.useEffect(()=>(m.itemMap.set(d,{ref:d,...o}),()=>void m.itemMap.delete(d))),(0,i.jsx)(r.Slot,{...{[f]:""},ref:u,children:l})});return h.displayName=p,[{Provider:u,Slot:x,ItemSlot:h},function(s){let a=c(e+"CollectionConsumer",s);return t.default.useCallback(()=>{let e=a.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${f}]`));return Array.from(a.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[a.collectionRef,a.itemMap])},o]}e.s(["createCollection",()=>n])},8537,e=>{"use strict";var t=e.i(62893),s=e.i(58846),a=e.i(70065),r=e.i(78896),i=e.i(17534),n=e.i(59301),l=e.i(11282),o=e.i(47946),d=e.i(69756),c=e.i(15981),u=e.i(71585),m=e.i(46621),x="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},f="RovingFocusGroup",[h,v,g]=(0,n.createCollection)(f),[j,y]=(0,i.createContextScope)(f,[g]),[b,C]=j(f),w=s.forwardRef((e,s)=>(0,t.jsx)(h.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(h.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(N,{...e,ref:s})})}));w.displayName=f;var N=s.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:i,orientation:n,loop:o=!1,dir:f,currentTabStopId:h,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:j,onEntryFocus:y,preventScrollOnEntryFocus:C=!1,...w}=e,N=s.useRef(null),k=(0,l.useComposedRefs)(a,N),A=(0,m.useDirection)(f),[R=null,I]=(0,u.useControllableState)({prop:h,defaultProp:g,onChange:j}),[P,S]=s.useState(!1),E=(0,c.useCallbackRef)(y),D=v(i),_=s.useRef(!1),[H,L]=s.useState(0);return s.useEffect(()=>{let e=N.current;if(e)return e.addEventListener(x,E),()=>e.removeEventListener(x,E)},[E]),(0,t.jsx)(b,{scope:i,orientation:n,dir:A,loop:o,currentTabStopId:R,onItemFocus:s.useCallback(e=>I(e),[I]),onItemShiftTab:s.useCallback(()=>S(!0),[]),onFocusableItemAdd:s.useCallback(()=>L(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>L(e=>e-1),[]),children:(0,t.jsx)(d.Primitive.div,{tabIndex:P||0===H?-1:0,"data-orientation":n,...w,ref:k,style:{outline:"none",...e.style},onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,()=>{_.current=!0}),onFocus:(0,r.composeEventHandlers)(e.onFocus,e=>{let t=!_.current;if(e.target===e.currentTarget&&t&&!P){let t=new CustomEvent(x,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=D().filter(e=>e.focusable);T([e.find(e=>e.active),e.find(e=>e.id===R),...e].filter(Boolean).map(e=>e.ref.current),C)}}_.current=!1}),onBlur:(0,r.composeEventHandlers)(e.onBlur,()=>S(!1))})})}),k="RovingFocusGroupItem",A=s.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:i,focusable:n=!0,active:l=!1,tabStopId:c,...u}=e,m=(0,o.useId)(),x=c||m,p=C(k,i),f=p.currentTabStopId===x,g=v(i),{onFocusableItemAdd:j,onFocusableItemRemove:y}=p;return s.useEffect(()=>{if(n)return j(),()=>y()},[n,j,y]),(0,t.jsx)(h.ItemSlot,{scope:i,id:x,focusable:n,active:l,children:(0,t.jsx)(d.Primitive.span,{tabIndex:f?0:-1,"data-orientation":p.orientation,...u,ref:a,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{n?p.onItemFocus(x):e.preventDefault()}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>p.onItemFocus(x)),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void p.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,s){var a;let r=(a=e.key,"rtl"!==s?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(r))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)))return R[r]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=g().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){var s,a;"prev"===t&&r.reverse();let i=r.indexOf(e.currentTarget);r=p.loop?(s=r,a=i+1,s.map((e,t)=>s[(a+t)%s.length])):r.slice(i+1)}setTimeout(()=>T(r))}})})})});A.displayName=k;var R={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T(e,t=!1){let s=document.activeElement;for(let a of e)if(a===s||(a.focus({preventScroll:t}),document.activeElement!==s))return}var I=e.i(74126),P="Tabs",[S,E]=(0,i.createContextScope)(P,[y]),D=y(),[_,H]=S(P),L=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,onValueChange:i,defaultValue:n,orientation:l="horizontal",dir:c,activationMode:x="automatic",...p}=e,f=(0,m.useDirection)(c),[h,v]=(0,u.useControllableState)({prop:r,onChange:i,defaultProp:n});return(0,t.jsx)(_,{scope:a,baseId:(0,o.useId)(),value:h,onValueChange:v,orientation:l,dir:f,activationMode:x,children:(0,t.jsx)(d.Primitive.div,{dir:f,"data-orientation":l,...p,ref:s})})});L.displayName=P;var M="TabsList",B=s.forwardRef((e,s)=>{let{__scopeTabs:a,loop:r=!0,...i}=e,n=H(M,a),l=D(a);return(0,t.jsx)(w,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:r,children:(0,t.jsx)(d.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:s})})});B.displayName=M;var F="TabsTrigger",V=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:i,disabled:n=!1,...l}=e,o=H(F,a),c=D(a),u=q(o.baseId,i),m=O(o.baseId,i),x=i===o.value;return(0,t.jsx)(A,{asChild:!0,...c,focusable:!n,active:x,children:(0,t.jsx)(d.Primitive.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...l,ref:s,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(i)}),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(i)}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;x||n||!e||o.onValueChange(i)})})})});V.displayName=F;var K="TabsContent",U=s.forwardRef((e,a)=>{let{__scopeTabs:r,value:i,forceMount:n,children:l,...o}=e,c=H(K,r),u=q(c.baseId,i),m=O(c.baseId,i),x=i===c.value,p=s.useRef(x);return s.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(I.Presence,{present:n||x,children:({present:s})=>(0,t.jsx)(d.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:m,tabIndex:0,...o,ref:a,style:{...e.style,animationDuration:p.current?"0s":void 0},children:s&&l})})});function q(e,t){return`${e}-trigger-${t}`}function O(e,t){return`${e}-content-${t}`}U.displayName=K;var z=e.i(47163);function G({className:e,...s}){return(0,t.jsx)(L,{"data-slot":"tabs",className:(0,z.cn)("flex flex-col gap-2",e),...s})}function Y({className:e,...s}){return(0,t.jsx)(B,{"data-slot":"tabs-list",className:(0,z.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function $({className:e,...s}){return(0,t.jsx)(V,{"data-slot":"tabs-trigger",className:(0,z.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function W({className:e,...s}){return(0,t.jsx)(U,{"data-slot":"tabs-content",className:(0,z.cn)("flex-1 outline-none",e),...s})}var J=e.i(35301),X=e.i(10965);let Q=(0,X.default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var Z=e.i(86591),ee=e.i(67881),et=e.i(94179);let es=(0,X.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var ea=e.i(90768),er=e.i(84762);function ei({onResult:e}){let[r,i]=(0,s.useState)([{endpoint:"/api/chat",status:"idle"},{endpoint:"/api/essay-review",status:"idle"},{endpoint:"/api/providers",status:"idle"},{endpoint:"/api/web-search",status:"idle"},{endpoint:"/api/document-process",status:"idle"}]),[n,l]=(0,s.useState)("你好，请介绍一下自己"),o=async e=>{let t=r[e].endpoint;i(t=>t.map((t,s)=>s===e?{...t,status:"testing"}:t));let s=Date.now();try{let a;a="/api/providers"===t?await fetch(t):"/api/chat"===t?await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:n}]})}):"/api/essay-review"===t?await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({essay:"这是一篇测试作文。",grade:"高中"})}):await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})});let r=Date.now()-s;if(a.ok)i(t=>t.map((t,s)=>s===e?{...t,status:"pass",message:`响应成功 (${a.status})`,duration:r}:t));else throw Error(`HTTP ${a.status}`)}catch(a){let t=Date.now()-s;i(s=>s.map((s,r)=>r===e?{...s,status:"fail",message:a instanceof Error?a.message:"请求失败",duration:t}:s))}},d=async()=>{for(let e=0;e<r.length;e++)await o(e),await new Promise(e=>setTimeout(e,500));e(r.every(e=>"pass"===e.status)?"pass":"fail")};return(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"API端点测试"}),(0,t.jsx)(a.CardDescription,{children:"测试所有API端点的可用性和响应时间"})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"测试输入"}),(0,t.jsx)(er.Textarea,{value:n,onChange:e=>l(e.target.value),placeholder:"输入测试内容...",rows:3})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(ee.Button,{onClick:d,children:[(0,t.jsx)(es,{className:"mr-2 h-4 w-4"}),"测试所有端点"]})}),(0,t.jsx)("div",{className:"space-y-2",children:r.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["idle"===e.status&&(0,t.jsx)("div",{className:"h-4 w-4 rounded-full bg-gray-300"}),"testing"===e.status&&(0,t.jsx)(ea.Loader2,{className:"h-4 w-4 animate-spin text-blue-500"}),"pass"===e.status&&(0,t.jsx)(J.CheckCircle2,{className:"h-4 w-4 text-green-500"}),"fail"===e.status&&(0,t.jsx)(Q,{className:"h-4 w-4 text-red-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-mono text-sm",children:e.endpoint}),e.message&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.message})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.duration&&(0,t.jsxs)(et.Badge,{variant:"outline",children:[e.duration,"ms"]}),(0,t.jsx)(ee.Button,{size:"sm",variant:"outline",onClick:()=>o(s),disabled:"testing"===e.status,children:"测试"})]})]},e.endpoint))})]})]})}var en=e.i(58595),el=e.i(87524),eo=e.i(70286);function ed({onResult:e}){return(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"认证功能测试"}),(0,t.jsx)(a.CardDescription,{children:"测试各种登录和注册方式"})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[[{name:"邮箱注册/登录",status:"available",description:"使用Supabase Auth，无需额外配置",testUrl:"/auth/sign-up",configRequired:!1},{name:"手机号验证码登录",status:"needs-config",description:"需要配置短信服务商（阿里云/腾讯云）",testUrl:"/auth/phone-login",configRequired:!0,envVars:["SMS_PROVIDER","SMS_ACCESS_KEY_ID","SMS_ACCESS_KEY_SECRET"]},{name:"微信OAuth登录",status:"needs-config",description:"需要微信开放平台企业认证",testUrl:"/auth/wechat-login",configRequired:!0,envVars:["WECHAT_APP_ID","WECHAT_APP_SECRET","NEXT_PUBLIC_WECHAT_REDIRECT_URI"]}].map(e=>(0,t.jsxs)("div",{className:"flex items-start justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),"available"===e.status&&(0,t.jsx)(J.CheckCircle2,{className:"h-4 w-4 text-green-500"}),"needs-config"===e.status&&(0,t.jsx)(el.AlertCircle,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),e.configRequired&&e.envVars&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"需要的环境变量:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.envVars.map(e=>(0,t.jsx)(et.Badge,{variant:"outline",className:"text-xs",children:e},e))})]})]}),(0,t.jsx)(eo.default,{href:e.testUrl,children:(0,t.jsxs)(ee.Button,{size:"sm",variant:"outline",children:[(0,t.jsx)(en.ExternalLink,{className:"mr-2 h-4 w-4"}),"测试"]})})]},e.name)),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"测试建议"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[(0,t.jsx)("li",{children:"邮箱登录可以立即测试，无需额外配置"}),(0,t.jsx)("li",{children:"手机号和微信登录需要先配置相应的环境变量"}),(0,t.jsx)("li",{children:"测试时请使用真实的邮箱地址以接收确认邮件"})]})]})]})]})}function ec({onResult:e}){return(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"支付功能测试"}),(0,t.jsx)(a.CardDescription,{children:"测试各种支付方式的集成"})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[[{name:"Stripe支付",status:"available",description:"已集成，支持国际信用卡支付",testUrl:"/checkout/standard",configRequired:!1,features:["信用卡","借记卡","Apple Pay","Google Pay"]},{name:"支付宝支付",status:"needs-config",description:"需要支付宝开放平台企业认证",testUrl:"/checkout/standard",configRequired:!0,envVars:["ALIPAY_APP_ID","ALIPAY_PRIVATE_KEY","ALIPAY_PUBLIC_KEY"],features:["扫码支付","网页支付"]},{name:"微信支付",status:"needs-config",description:"需要微信支付商户平台认证",testUrl:"/checkout/standard",configRequired:!0,envVars:["WECHAT_PAY_MCH_ID","WECHAT_PAY_API_KEY"],features:["Native扫码","H5支付"]}].map(e=>(0,t.jsxs)("div",{className:"flex items-start justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),"available"===e.status&&(0,t.jsx)(J.CheckCircle2,{className:"h-4 w-4 text-green-500"}),"needs-config"===e.status&&(0,t.jsx)(el.AlertCircle,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.features.map(e=>(0,t.jsx)(et.Badge,{variant:"secondary",className:"text-xs",children:e},e))}),e.configRequired&&e.envVars&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"需要的环境变量:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.envVars.map(e=>(0,t.jsx)(et.Badge,{variant:"outline",className:"text-xs",children:e},e))})]})]}),(0,t.jsx)(eo.default,{href:e.testUrl,children:(0,t.jsxs)(ee.Button,{size:"sm",variant:"outline",children:[(0,t.jsx)(en.ExternalLink,{className:"mr-2 h-4 w-4"}),"测试支付"]})})]},e.name)),(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-950 rounded-lg space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"重要提示"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[(0,t.jsx)("li",{children:"Stripe支持测试模式，可以使用测试卡号进行测试"}),(0,t.jsx)("li",{children:"支付宝和微信支付需要真实的商户账号"}),(0,t.jsx)("li",{children:"测试时请使用小额订单（如0.01元）"}),(0,t.jsx)("li",{children:"确保配置了正确的回调URL"})]})]})]})]})}function eu({onResult:e}){let[r,i]=(0,s.useState)([{id:"openai",name:"OpenAI GPT-5",status:"idle"},{id:"anthropic",name:"Claude Sonnet 4.5",status:"idle"},{id:"xai",name:"Grok 4",status:"idle"},{id:"google",name:"Gemini 2.5 Flash",status:"idle"},{id:"fireworks",name:"Llama 4 70B",status:"idle"}]),[n,l]=(0,s.useState)("用一句话介绍你自己"),o=async e=>{let t=r[e];i(t=>t.map((t,s)=>s===e?{...t,status:"testing"}:t));let s=Date.now();try{let a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json","X-AI-Provider":t.id},body:JSON.stringify({messages:[{role:"user",content:n}]})}),r=Date.now()-s;if(a.ok){let t=a.body?.getReader(),s=new TextDecoder,n="";if(t)for(;;){let{done:e,value:a}=await t.read();if(e)break;n+=s.decode(a)}i(t=>t.map((t,s)=>s===e?{...t,status:"pass",response:n.substring(0,100)+"...",duration:r}:t))}else throw Error(`HTTP ${a.status}`)}catch(a){let t=Date.now()-s;i(s=>s.map((s,r)=>r===e?{...s,status:"fail",response:a instanceof Error?a.message:"请求失败",duration:t}:s))}},d=async()=>{for(let e=0;e<r.length;e++)await o(e),await new Promise(e=>setTimeout(e,1e3));e(r.every(e=>"pass"===e.status)?"pass":"fail")};return(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"AI提供商测试"}),(0,t.jsx)(a.CardDescription,{children:"测试所有AI提供商的响应速度和质量"})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"测试提示词"}),(0,t.jsx)(er.Textarea,{value:n,onChange:e=>l(e.target.value),placeholder:"输入测试提示词...",rows:2})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(ee.Button,{onClick:d,children:[(0,t.jsx)(es,{className:"mr-2 h-4 w-4"}),"测试所有提供商"]})}),(0,t.jsx)("div",{className:"space-y-2",children:r.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["idle"===e.status&&(0,t.jsx)("div",{className:"h-4 w-4 rounded-full bg-gray-300"}),"testing"===e.status&&(0,t.jsx)(ea.Loader2,{className:"h-4 w-4 animate-spin text-blue-500"}),"pass"===e.status&&(0,t.jsx)(J.CheckCircle2,{className:"h-4 w-4 text-green-500"}),"fail"===e.status&&(0,t.jsx)(Q,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)("h3",{className:"font-medium",children:e.name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.duration&&(0,t.jsxs)(et.Badge,{variant:"outline",children:[e.duration,"ms"]}),(0,t.jsx)(ee.Button,{size:"sm",variant:"outline",onClick:()=>o(s),disabled:"testing"===e.status,children:"测试"})]})]}),e.response&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground pl-7",children:e.response})]},e.id))}),(0,t.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-950 rounded-lg space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"测试说明"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[(0,t.jsx)("li",{children:"所有AI提供商通过Vercel AI Gateway自动路由"}),(0,t.jsx)("li",{children:"无需配置API密钥即可测试"}),(0,t.jsx)("li",{children:"响应时间包含网络延迟和模型推理时间"}),(0,t.jsx)("li",{children:"可以对比不同提供商的响应质量"})]})]})]})]})}function em(){let[e,r]=(0,s.useState)({}),i=[{id:"api",name:"API测试",description:"测试所有API端点的可用性",status:e.api||"pending"},{id:"auth",name:"认证测试",description:"测试登录、注册、微信登录等功能",status:e.auth||"pending"},{id:"payment",name:"支付测试",description:"测试支付宝、微信支付、Stripe集成",status:e.payment||"pending"},{id:"ai",name:"AI提供商测试",description:"测试8个AI提供商的响应",status:e.ai||"pending"}];return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"功能测试中心"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"测试网站的所有核心功能，确保系统正常运行"})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:i.map(e=>(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium",children:e.name}),"pass"===e.status&&(0,t.jsx)(J.CheckCircle2,{className:"h-4 w-4 text-green-500"}),"fail"===e.status&&(0,t.jsx)(Q,{className:"h-4 w-4 text-red-500"}),"pending"===e.status&&(0,t.jsx)(Z.Clock,{className:"h-4 w-4 text-yellow-500"})]})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})})]},e.id))}),(0,t.jsxs)(G,{defaultValue:"api",className:"space-y-4",children:[(0,t.jsxs)(Y,{children:[(0,t.jsx)($,{value:"api",children:"API测试"}),(0,t.jsx)($,{value:"auth",children:"认证测试"}),(0,t.jsx)($,{value:"payment",children:"支付测试"}),(0,t.jsx)($,{value:"ai",children:"AI测试"})]}),(0,t.jsx)(W,{value:"api",className:"space-y-4",children:(0,t.jsx)(ei,{onResult:e=>r(t=>({...t,api:e}))})}),(0,t.jsx)(W,{value:"auth",className:"space-y-4",children:(0,t.jsx)(ed,{onResult:e=>r(t=>({...t,auth:e}))})}),(0,t.jsx)(W,{value:"payment",className:"space-y-4",children:(0,t.jsx)(ec,{onResult:e=>r(t=>({...t,payment:e}))})}),(0,t.jsx)(W,{value:"ai",className:"space-y-4",children:(0,t.jsx)(eu,{onResult:e=>r(t=>({...t,ai:e}))})})]})]})}e.s(["TestDashboard",()=>em],8537)}]);