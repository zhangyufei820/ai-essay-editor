{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/aixingren/ai-essay-editor/lib/products.ts"],"sourcesContent":["export interface Product {\n  id: string\n  name: string\n  description: string\n  priceInCents: number // ä»·æ ¼ï¼ˆå•ä½ï¼šåˆ†ï¼‰\n  features: string[]\n  popular?: boolean\n}\n\n// äº§å“ç›®å½• - æ‰€æœ‰ä»·æ ¼çš„å”¯ä¸€çœŸå®æ¥æº\n// [!!!] ä¿®å¤ï¼šè¿™é‡Œçš„ ID å¿…é¡»ä¸ pricing.tsx ä¸­çš„ ID å®Œå…¨åŒ¹é… [!!!]\nexport const PRODUCTS: Product[] = [\n  // --- è®¢é˜…æ–¹æ¡ˆ (æ¥è‡ª pricing.tsx) ---\n  {\n    id: \"basic\",\n    name: \"åŸºç¡€ç‰ˆ\",\n    description: \"é€‚åˆå…¥é—¨ä½“éªŒ\",\n    priceInCents: 2800, // 28 å…ƒ * 100\n    features: [\"æ¯æœˆ 2,000 ç§¯åˆ†\", \"è°ƒç”¨æ‰€æœ‰ AI æ¨¡å‹\", \"æ ‡å‡†ç”Ÿæˆé€Ÿåº¦\", \"ç¤¾åŒºæ”¯æŒ\", \"è°ƒç”¨ä¸“ä¸šæ™ºèƒ½ä½“\"],\n  },\n  {\n    id: \"pro\",\n    name: \"ä¸“ä¸šç‰ˆ\",\n    description: \"é€‚åˆé«˜é¢‘å­¦ç”Ÿ\",\n    priceInCents: 6800, // 68 å…ƒ * 100\n    features: [\n      \"æ¯æœˆ 5,000 ç§¯åˆ†\",\n      \"è°ƒç”¨æ‰€æœ‰ AI æ¨¡å‹\",\n      \"ä¼˜å…ˆç”Ÿæˆé€Ÿåº¦\",\n      \"é«˜çº§æ¶¦è‰²å·¥å…·\",\n      \"åå¸ˆè¾…å¯¼ (1æ¬¡/æœˆ)\",\n      \"è°ƒç”¨ä¸“ä¸šæ™ºèƒ½ä½“\",\n    ],\n    popular: true,\n  },\n  {\n    id: \"premium\",\n    name: \"è±ªåç‰ˆ\",\n    description: \"é€‚åˆé‡åº¦ç”¨æˆ·/æ•™è‚²è€…\",\n    priceInCents: 12800, // 128 å…ƒ * 100\n    features: [\n      \"æ¯æœˆ 12,000 ç§¯åˆ†\",\n      \"è°ƒç”¨ä¸‰å¤§é¡¶å°–æ¨¡å‹\",\n      \"æœ€é«˜ä¼˜å…ˆé€Ÿåº¦\",\n      \"é«˜çº§æ¶¦è‰²å·¥å…·\",\n      \"åå¸ˆè¾…å¯¼ (2æ¬¡/æœˆ)\",\n      \"æ— é™æ¬¡ AI å¯¹è¯\",\n      \"è°ƒç”¨ä¸“ä¸šæ™ºèƒ½ä½“\",\n    ],\n  },\n\n  // --- ç§¯åˆ†å……å€¼åŒ… (æ¥è‡ª pricing.tsx) ---\n  {\n    id: \"credits-500\",\n    name: \"500 ç§¯åˆ†å……å€¼åŒ…\",\n    description: \"æ°¸ä¹…æœ‰æ•ˆï¼Œé€‚åˆè½»åº¦æˆ–æµ‹è¯•ç”¨æˆ·\",\n    priceInCents: 500, // 5 å…ƒ * 100\n    features: [\"500 ç§¯åˆ†\", \"æ°¸ä¹…æœ‰æ•ˆ\", \"å¯ç”¨äºç”Ÿæˆä½œæ–‡æˆ–å…‘æ¢è¾…å¯¼\"],\n  },\n  {\n    id: \"credits-1000\",\n    name: \"1000 ç§¯åˆ†å……å€¼åŒ…\",\n    description: \"æ°¸ä¹…æœ‰æ•ˆï¼Œé€‚åˆè½»åº¦æˆ–æµ‹è¯•ç”¨æˆ·\",\n    priceInCents: 1000, // 10 å…ƒ * 100\n    features: [\"1000 ç§¯åˆ†\", \"æ°¸ä¹…æœ‰æ•ˆ\", \"å¯ç”¨äºç”Ÿæˆä½œæ–‡æˆ–å…‘æ¢è¾…å¯¼\"],\n  },\n  {\n    id: \"credits-5000\",\n    name: \"5000 ç§¯åˆ†å……å€¼åŒ…\",\n    description: \"æ°¸ä¹…æœ‰æ•ˆ (96æŠ˜ä¼˜æƒ )\",\n    priceInCents: 4800, // 48 å…ƒ * 100\n    features: [\"5000 ç§¯åˆ†\", \"æ°¸ä¹…æœ‰æ•ˆ\", \"å¯ç”¨äºç”Ÿæˆä½œæ–‡æˆ–å…‘æ¢è¾…å¯¼\"],\n  },\n  {\n    id: \"credits-10000\",\n    name: \"10000 ç§¯åˆ†å……å€¼åŒ…\",\n    description: \"æ°¸ä¹…æœ‰æ•ˆ (9æŠ˜ä¼˜æƒ )\",\n    priceInCents: 9000, // 90 å…ƒ * 100\n    features: [\"10000 ç§¯åˆ†\", \"æ°¸ä¹…æœ‰æ•ˆ\", \"å¯ç”¨äºç”Ÿæˆä½œæ–‡æˆ–å…‘æ¢è¾…å¯¼\"],\n  },\n]"],"names":[],"mappings":";;;;AAWO,MAAM,WAAsB;IACjC,gCAAgC;IAChC;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAe;YAAc;YAAU;YAAQ;SAAU;IACtE;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,SAAS;IACX;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;YACA;SACD;IACH;IAEA,iCAAiC;IACjC;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAU;YAAQ;SAAe;IAC9C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAW;YAAQ;SAAe;IAC/C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAW;YAAQ;SAAe;IAC/C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAY;YAAQ;SAAe;IAChD;CACD","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/aixingren/ai-essay-editor/app/api/payment/xunhupay/create/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport crypto from \"crypto\";\nimport { PRODUCTS } from \"@/lib/products\"; \n\n// 1. ç­¾åç®—æ³• (ä¿æŒä½ éªŒè¯æˆåŠŸçš„è¿™ä¸ªç‰ˆæœ¬ï¼šç›´æ¥æ‹¼æ¥)\nfunction gen_sign(params: any, appSecret: string) {\n  const sortedKeys = Object.keys(params).sort();\n  const kvPairs = [];\n  \n  for (const key of sortedKeys) {\n    if (params[key] !== \"\" && params[key] !== undefined && key !== \"hash\") {\n      kvPairs.push(`${key}=${params[key]}`);\n    }\n  }\n  \n  // æ ¸å¿ƒï¼šç›´æ¥æ‹¼æ¥å¯†é’¥ï¼Œæ— è¿æ¥ç¬¦\n  let stringA = kvPairs.join(\"&\");\n  let stringSignTemp = stringA + appSecret;\n  \n  return crypto.createHash(\"md5\").update(stringSignTemp, \"utf8\").digest(\"hex\");\n}\n\nexport async function GET(request: Request) {\n  try {\n    // ä½ çš„è´¦å·é…ç½® (ä¿æŒä¸å˜)\n    const APP_ID = \"201906175339\"; \n    const APP_SECRET = \"5f9c2b5d451978f6f369375cf7247cf7\"; \n\n    const { searchParams } = new URL(request.url);\n    const productId = searchParams.get(\"productId\");\n    const product = PRODUCTS.find((p) => p.id === productId);\n    const price = product ? (product.priceInCents / 100).toFixed(2) : \"0.01\";\n    \n    // ä¾ç„¶ç”¨è‹±æ–‡æ ‡é¢˜ï¼Œç¨³\n    const safeTitle = \"VIP_Service\"; \n    const tradeOrderId = `ORDER_${Date.now()}`;\n\n    const params: any = {\n      version: \"1.1\",\n      appid: APP_ID,\n      trade_order_id: tradeOrderId,\n      total_fee: price,\n      title: safeTitle,\n      time: Math.floor(Date.now() / 1000).toString(),\n      nonce_str: Math.floor(Math.random() * 1000000).toString(),\n      type: \"WAP\", \n      wap_url: \"http://localhost:3000\", \n      notify_url: \"http://localhost:3000/api/payment/callback\", \n    };\n\n    // è®¡ç®—ç­¾å\n    params.hash = gen_sign(params, APP_SECRET);\n\n    // =========================================================\n    // ğŸš¨ å…³é”®å‡çº§ï¼šåç«¯è‡ªåŠ¨å¸®ä½ åœ¨è¿…è™æ‹¿â€œå…¥åœºåˆ¸â€\n    // =========================================================\n    \n    // 1. ç»„è£…è¯·æ±‚å‚æ•°\n    const formData = new URLSearchParams(params);\n\n    console.log(\"ğŸš€ [åç«¯] æ­£åœ¨è¯·æ±‚è¿…è™æ¥å£è·å–æ”¯ä»˜é¡µ...\");\n\n    // 2. å‘èµ·è¯·æ±‚ (è¿™æ¬¡ç­¾åå¯¹äº†ï¼Œæ‰€ä»¥ä¸ä¼šæŠ¥é”™äº†)\n    const response = await fetch(\"https://api.xunhupay.com/payment/do.html\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        // åŠ ä¸Š Referer é˜²æ­¢è¢«æ‹¦æˆª\n        \"Referer\": \"http://localhost:3000\",\n      },\n      body: formData,\n    });\n\n    // 3. è§£æä½ åˆšæ‰çœ‹åˆ°çš„é‚£ä¸ª JSON\n    const data = await response.json();\n    console.log(\"âœ… [åç«¯] è¿…è™è¿”å›æˆåŠŸ:\", data);\n\n    // 4. æå–çœŸæ­£çš„æ”¯ä»˜é“¾æ¥\n    // ä¼˜å…ˆç”¨ url (é€šç”¨)ï¼Œå¦‚æœæ²¡è¿”å› url åˆ™ç”¨ url_qrcode\n    const finalPayUrl = data.url || data.url_qrcode;\n\n    if (finalPayUrl) {\n       // è¿”å›ç»™å‰ç«¯ï¼Œè®©å‰ç«¯ç›´æ¥è·³è¿™ä¸ªåœ°å€\n       return NextResponse.json({ url: finalPayUrl });\n    } else {\n       throw new Error(\"æœªè·å–åˆ°æ”¯ä»˜é“¾æ¥: \" + JSON.stringify(data));\n    }\n\n  } catch (error: any) {\n    console.error(\"âŒ API Error:\", error);\n    return NextResponse.json({ error: error.message }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,8BAA8B;AAC9B,SAAS,SAAS,MAAW,EAAE,SAAiB;IAC9C,MAAM,aAAa,OAAO,IAAI,CAAC,QAAQ,IAAI;IAC3C,MAAM,UAAU,EAAE;IAElB,KAAK,MAAM,OAAO,WAAY;QAC5B,IAAI,MAAM,CAAC,IAAI,KAAK,MAAM,MAAM,CAAC,IAAI,KAAK,aAAa,QAAQ,QAAQ;YACrE,QAAQ,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,EAAE;QACtC;IACF;IAEA,iBAAiB;IACjB,IAAI,UAAU,QAAQ,IAAI,CAAC;IAC3B,IAAI,iBAAiB,UAAU;IAE/B,OAAO,gHAAM,CAAC,UAAU,CAAC,OAAO,MAAM,CAAC,gBAAgB,QAAQ,MAAM,CAAC;AACxE;AAEO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,gBAAgB;QAChB,MAAM,SAAS;QACf,MAAM,aAAa;QAEnB,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,YAAY,aAAa,GAAG,CAAC;QACnC,MAAM,UAAU,6HAAQ,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAC9C,MAAM,QAAQ,UAAU,CAAC,QAAQ,YAAY,GAAG,GAAG,EAAE,OAAO,CAAC,KAAK;QAElE,YAAY;QACZ,MAAM,YAAY;QAClB,MAAM,eAAe,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;QAE1C,MAAM,SAAc;YAClB,SAAS;YACT,OAAO;YACP,gBAAgB;YAChB,WAAW;YACX,OAAO;YACP,MAAM,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK,MAAM,QAAQ;YAC5C,WAAW,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,SAAS,QAAQ;YACvD,MAAM;YACN,SAAS;YACT,YAAY;QACd;QAEA,OAAO;QACP,OAAO,IAAI,GAAG,SAAS,QAAQ;QAE/B,4DAA4D;QAC5D,0BAA0B;QAC1B,4DAA4D;QAE5D,YAAY;QACZ,MAAM,WAAW,IAAI,gBAAgB;QAErC,QAAQ,GAAG,CAAC;QAEZ,2BAA2B;QAC3B,MAAM,WAAW,MAAM,MAAM,4CAA4C;YACvE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,mBAAmB;gBACnB,WAAW;YACb;YACA,MAAM;QACR;QAEA,qBAAqB;QACrB,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,QAAQ,GAAG,CAAC,kBAAkB;QAE9B,eAAe;QACf,uCAAuC;QACvC,MAAM,cAAc,KAAK,GAAG,IAAI,KAAK,UAAU;QAE/C,IAAI,aAAa;YACd,mBAAmB;YACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,KAAK;YAAY;QAC/C,OAAO;YACJ,MAAM,IAAI,MAAM,eAAe,KAAK,SAAS,CAAC;QACjD;IAEF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF","debugId":null}}]
}