{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/aixingren/ai-essay-editor/lib/ai-utils.ts"],"sourcesContent":["export type AIProviderConfig = {\n  id: string\n  name: string\n  models: string[]\n}\n\nexport const AI_PROVIDERS: AIProviderConfig[] = [\n  { id: \"openai\", name: \"OpenAI\", models: [\"gpt-5\", \"gpt-5-mini\"] },\n  { id: \"anthropic\", name: \"Anthropic\", models: [\"claude-sonnet-4.5\", \"claude-opus-4\"] },\n  { id: \"xai\", name: \"xAI (Grok)\", models: [\"grok-4\", \"grok-4-fast\"] },\n  { id: \"google\", name: \"Google\", models: [\"gemini-2.5-flash\", \"gemini-2.5-pro\"] },\n  { id: \"fireworks\", name: \"Fireworks AI\", models: [\"llama-v4-70b\", \"mixtral-8x22b\"] },\n]\n\nexport function getModelString(provider: string, model: string, useCustomKey = false): string {\n  // Â¶ÇÊûú‰ΩøÁî®Ëá™ÂÆö‰πâÂØÜÈí•ÔºåËøîÂõû‰∏çÂ∏¶ÂâçÁºÄÁöÑÊ®°ÂûãÂêç\n  if (useCustomKey) {\n    return model\n  }\n\n  const modelMap: Record<string, string> = {\n    openai: `openai/${model}`,\n    anthropic: `anthropic/${model}`,\n    xai: `xai/${model}`,\n    google: `google/${model}`,\n    fireworks: `fireworks/${model}`,\n  }\n\n  return modelMap[provider] || `openai/${model}`\n}\n\nexport function parseModelString(modelString: string): { provider: string; model: string } {\n  const [provider, model] = modelString.split(\"/\")\n  return { provider: provider || \"openai\", model: model || \"gpt-5\" }\n}\n\nexport type CustomAPIConfig = {\n  provider: string\n  apiKey: string\n  baseURL?: string\n}\n\nexport function getAPIConfig(provider: string): CustomAPIConfig | null {\n  const DEFAULT_API_KEY = \"sk-diaycftqfopXhIAf5gm7G35xSndFo0VzMi0PyRpHQGz4voxG\"\n  const DEFAULT_BASE_URL = \"https://www.vivaapi.cn/v1\"\n\n  // All providers use the same vivaapi endpoint\n  const apiKey = process.env.CUSTOM_API_KEY || DEFAULT_API_KEY\n  const baseURL = process.env.CUSTOM_BASE_URL || DEFAULT_BASE_URL\n\n  console.log(`[v0] Using vivaapi for all models`)\n  console.log(`[v0] Base URL: ${baseURL}`)\n\n  return {\n    provider: \"vivaapi\",\n    apiKey,\n    baseURL,\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAMO,MAAM,eAAmC;IAC9C;QAAE,IAAI;QAAU,MAAM;QAAU,QAAQ;YAAC;YAAS;SAAa;IAAC;IAChE;QAAE,IAAI;QAAa,MAAM;QAAa,QAAQ;YAAC;YAAqB;SAAgB;IAAC;IACrF;QAAE,IAAI;QAAO,MAAM;QAAc,QAAQ;YAAC;YAAU;SAAc;IAAC;IACnE;QAAE,IAAI;QAAU,MAAM;QAAU,QAAQ;YAAC;YAAoB;SAAiB;IAAC;IAC/E;QAAE,IAAI;QAAa,MAAM;QAAgB,QAAQ;YAAC;YAAgB;SAAgB;IAAC;CACpF;AAEM,SAAS,eAAe,QAAgB,EAAE,KAAa,EAAE,eAAe,KAAK;IAClF,uBAAuB;IACvB,IAAI,cAAc;QAChB,OAAO;IACT;IAEA,MAAM,WAAmC;QACvC,QAAQ,CAAC,OAAO,EAAE,OAAO;QACzB,WAAW,CAAC,UAAU,EAAE,OAAO;QAC/B,KAAK,CAAC,IAAI,EAAE,OAAO;QACnB,QAAQ,CAAC,OAAO,EAAE,OAAO;QACzB,WAAW,CAAC,UAAU,EAAE,OAAO;IACjC;IAEA,OAAO,QAAQ,CAAC,SAAS,IAAI,CAAC,OAAO,EAAE,OAAO;AAChD;AAEO,SAAS,iBAAiB,WAAmB;IAClD,MAAM,CAAC,UAAU,MAAM,GAAG,YAAY,KAAK,CAAC;IAC5C,OAAO;QAAE,UAAU,YAAY;QAAU,OAAO,SAAS;IAAQ;AACnE;AAQO,SAAS,aAAa,QAAgB;IAC3C,MAAM,kBAAkB;IACxB,MAAM,mBAAmB;IAEzB,8CAA8C;IAC9C,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc,IAAI;IAC7C,MAAM,UAAU,QAAQ,GAAG,CAAC,eAAe,IAAI;IAE/C,QAAQ,GAAG,CAAC,CAAC,iCAAiC,CAAC;IAC/C,QAAQ,GAAG,CAAC,CAAC,eAAe,EAAE,SAAS;IAEvC,OAAO;QACL,UAAU;QACV;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/aixingren/ai-essay-editor/app/api/chat/route.ts"],"sourcesContent":["import { getAPIConfig } from \"@/lib/ai-utils\"\nimport { createClient } from '@supabase/supabase-js'\n\nexport const maxDuration = 60 // ‰ΩúÊñáÊâπÊîπÊØîËæÉÊÖ¢ÔºåÈÄÇÂΩìÂª∂ÈïøË∂ÖÊó∂Êó∂Èó¥\n\n// üí∞ ÂÆö‰ª∑Á≠ñÁï• (Ê†πÊçÆ‰Ω†ÁöÑÂõæÁâáÊé®ÂØº)\nconst COST_ESSAY = 250 // ‰ΩúÊñáÊâπÊîπÔºö250 ÁßØÂàÜ/Ê¨°\nconst COST_CHAT = 20   // ÊôÆÈÄöÂØπËØùÔºö20 ÁßØÂàÜ/Ê¨°\n\nexport async function OPTIONS(req: Request) {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization, X-AI-Provider, X-AI-Model',\n    },\n  })\n}\n\nexport async function POST(req: Request) {\n  try {\n    console.log(\"[v0] Chat API called\")\n\n    const body = await req.json()\n    const { messages, files, extractedText, userId }: { messages: any[]; files?: any[]; extractedText?: string, userId?: string } = body\n\n    // Âà§Êñ≠ÊòØÂê¶‰∏∫‰ΩúÊñáËØ∑Ê±Ç (ÊúâÊèêÂèñÁöÑÊñáÊú¨‰∏îÈïøÂ∫¶Â§ß‰∫é 100)\n    const isEssayRequest = extractedText && extractedText.length > 100\n    \n    // Á°ÆÂÆöÊú¨Ê¨°Êìç‰ΩúÁöÑË¥πÁî®\n    const currentCost = isEssayRequest ? COST_ESSAY : COST_CHAT\n\n    // ==========================================\n    // üõë Á¨¨‰∏ÄÂÖ≥ÔºöÂÆâÊ£Ä (Ê£ÄÊü•ÁßØÂàÜ)\n    // ==========================================\n    if (!userId) {\n       console.warn(\"‚ö†Ô∏è Ë≠¶Âëä: ÂâçÁ´ØÊú™‰º†ÈÄí userIdÔºåÊó†Ê≥ïÊâ£Ë¥πÔºÅ(ÊöÇÊó∂ÊîæË°åÔºå‰ΩÜÂú®Áîü‰∫ßÁéØÂ¢ÉÂ∫îÊã¶Êà™)\")\n       // return new Response(JSON.stringify({ error: \"Êú™ÁôªÂΩïÔºåÊó†Ê≥ï‰ΩøÁî®\" }), { status: 401 }) \n    } \n    else {\n      const supabaseAdmin = createClient(\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\n        process.env.SUPABASE_SERVICE_ROLE_KEY!\n      )\n\n      // Êü•‰ΩôÈ¢ù\n      const { data: creditData, error: creditError } = await supabaseAdmin\n        .from('user_credits')\n        .select('credits')\n        .eq('user_id', userId)\n        .single()\n      \n      if (creditError || !creditData) {\n         console.error(\"Êü•ËØ¢ÁßØÂàÜÂ§±Ë¥•:\", creditError)\n      } else {\n        console.log(`[Billing] Áî®Êà∑ ${userId} ÂΩìÂâçÁßØÂàÜ: ${creditData.credits}, Êú¨Ê¨°ÈúÄÊâ£Èô§: ${currentCost}`)\n        \n        // Ê†∏ÂøÉÂà§Êñ≠Ôºö‰ΩôÈ¢ùÊòØÂê¶Ë∂≥Â§üÊîØ‰ªòÊú¨Ê¨°Ë¥πÁî®\n        if (creditData.credits < currentCost) {\n          return new Response(JSON.stringify({ \n            error: `ÁßØÂàÜ‰∏çË∂≥ÔºÅÊú¨Ê¨°Êìç‰ΩúÈúÄË¶Å ${currentCost} ÁßØÂàÜÔºåÊÇ®ÂΩìÂâç‰ªÖÂâ© ${creditData.credits} ÁßØÂàÜ„ÄÇËØ∑ÂâçÂæÄÂçáÁ∫ßÂ•óÈ§ê„ÄÇ` \n          }), {\n            status: 402, // Payment Required\n            headers: { \"Content-Type\": \"application/json\" }\n          })\n        }\n      }\n    }\n    // ==========================================\n\n    // ÂÆö‰πâÊâ£Ë¥πÂáΩÊï∞ (ÂêéÁª≠Ë∞ÉÁî®)\n    const deductCredit = async () => {\n      if (!userId) return\n      try {\n        const supabaseAdmin = createClient(\n          process.env.NEXT_PUBLIC_SUPABASE_URL!,\n          process.env.SUPABASE_SERVICE_ROLE_KEY!\n        )\n        const { data } = await supabaseAdmin.from('user_credits').select('credits').eq('user_id', userId).single()\n        \n        if (data) {\n          // Á°Æ‰øù‰∏çÊâ£ÊàêË¥üÊï∞\n          const newCredits = Math.max(0, data.credits - currentCost)\n          await supabaseAdmin\n            .from('user_credits')\n            .update({ credits: newCredits })\n            .eq('user_id', userId)\n          console.log(`[Billing] Êâ£Ë¥πÊàêÂäü (-${currentCost})ÔºåÂâ©‰Ωô: ${newCredits}`)\n        }\n      } catch (e) {\n        console.error(\"[Billing] Êâ£Ë¥πÂ§±Ë¥•:\", e)\n      }\n    }\n\n    // --- ÂàÜÊîØ A: ‰ΩúÊñáÊâπÊîπÊ®°Âºè ---\n    if (isEssayRequest) {\n      console.log(\"[v0] Triggering grading workflow...\")\n\n      try {\n        // Ë∞ÉÁî®‰∏ìÈó®ÁöÑÊâπÊîπÊé•Âè£ (ÂÅáËÆæ‰Ω†Â∑≤ÁªèÊúâ‰∫ÜËøô‰∏™Êé•Âè£)\n        const essayGradeResponse = await fetch(`${req.url.replace(\"/api/chat\", \"/api/essay-grade\")}`, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            essayText: extractedText,\n            gradeLevel: \"Âàù‰∏≠\", // ËøôÈáåÂèØ‰ª•Ê†πÊçÆÁî®Êà∑ËæìÂÖ•Âä®ÊÄÅË∞ÉÊï¥\n            topic: \"‰ΩúÊñáÊâπÊîπ\",\n            wordLimit: \"800Â≠ó\",\n          }),\n        })\n\n        if (!essayGradeResponse.ok) throw new Error(\"Essay grading failed\")\n\n        const essayResult = await essayGradeResponse.json()\n\n        // ‚úÖ Âè™ÊúâÊàêÂäüÊãøÂà∞ÁªìÊûúÊâçÊâ£Ë¥π (ËâØÂøÉÂïÜÂÆ∂)\n        await deductCredit()\n\n        const encoder = new TextEncoder()\n        const stream = new ReadableStream({\n          start(controller) {\n            const resultJSON = JSON.stringify(essayResult.result, null, 2)\n            const fullText = \"\\`\\`\\`json\\n\" + resultJSON + \"\\n\\`\\`\\`\"\n            const aiSDKChunk = `0:${JSON.stringify({ type: \"text-delta\", textDelta: fullText })}\\n`\n            controller.enqueue(encoder.encode(aiSDKChunk))\n            const finishChunk = `0:${JSON.stringify({ type: \"finish\", finishReason: \"stop\" })}\\n`\n            controller.enqueue(encoder.encode(finishChunk))\n            controller.close()\n          },\n        })\n\n        return new Response(stream, {\n          headers: {\n            \"Content-Type\": \"text/plain; charset=utf-8\",\n            \"X-Vercel-AI-Data-Stream\": \"v1\",\n            \"Cache-Control\": \"no-cache\",\n            Connection: \"keep-alive\",\n            'Access-Control-Allow-Origin': '*',\n          },\n        })\n      } catch (error) {\n        console.error(\"[v0] Essay grading error:\", error)\n        throw new Error(\"Essay grading failed\")\n      }\n    }\n\n    // --- ÂàÜÊîØ B: Dify ÂØπËØùÊ®°Âºè ---\n    const provider = req.headers.get(\"X-AI-Provider\") || \"openai\"\n    const modelName = req.headers.get(\"X-AI-Model\") || \"gpt-4o\"\n    const customConfig = getAPIConfig(provider)\n\n    if (!customConfig) {\n      return new Response(JSON.stringify({ error: \"API configuration not found\" }), {\n        status: 500,\n        headers: { \"Content-Type\": \"application/json\" }\n      })\n    }\n\n    // ÈáçÊñ∞ÊûÑÂª∫Ê∂àÊÅØ\n    const apiMessages = messages.map((msg, index) => {\n      let textContent = \"\"\n      if (msg.parts && Array.isArray(msg.parts)) {\n        textContent = msg.parts.filter((part: any) => part.type === \"text\").map((part: any) => part.text).join(\"\\n\")\n      } else if (msg.content) {\n         // Â§ÑÁêÜ Vercel AI SDK ‰∏çÂêåÁâàÊú¨ÁöÑ content Ê†ºÂºè\n        if (Array.isArray(msg.content)) {\n          textContent = msg.content.filter((part: any) => part.type === \"text\").map((part: any) => part.text).join(\"\\n\")\n        } else if (typeof msg.content === \"string\") {\n          textContent = msg.content\n        } else {\n          textContent = String(msg.content || \"\")\n        }\n      }\n\n      // Êñá‰ª∂Â§ÑÁêÜÈÄªËæë (‰øùÊåÅÂéüÊ†∑)\n      if (index === messages.length - 1 && msg.role === \"user\" && files && files.length > 0) {\n         const hasImages = files.some((file) => file.type.startsWith(\"image/\"))\n         if (hasImages) {\n             const content: any[] = []\n             if (textContent.trim()) content.push({ type: \"text\", text: textContent })\n             for (const file of files) {\n                if (file.type.startsWith(\"image/\")) {\n                  content.push({ type: \"image_url\", image_url: { url: file.data } })\n                }\n             }\n             return { role: msg.role, content: content }\n         } else {\n             let fileContext = \"\"\n             for (const file of files) {\n                if (file.type === \"text/plain\") {\n                    try {\n                        const base64Data = file.data.split(\",\")[1]\n                        const fileTextContent = Buffer.from(base64Data, \"base64\").toString(\"utf-8\")\n                        fileContext += `\\n\\n[Êñá‰ª∂: ${file.name}]\\n${fileTextContent}`\n                    } catch(e) {}\n                }\n             }\n             return { role: msg.role, content: textContent + fileContext }\n         }\n      }\n      return { role: msg.role, content: textContent }\n    })\n\n    const response = await fetch(`${customConfig.baseURL}/chat/completions`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${customConfig.apiKey}`,\n      },\n      body: JSON.stringify({\n        model: modelName,\n        messages: apiMessages,\n        stream: true,\n        temperature: 0.7,\n        max_tokens: 4000,\n      }),\n    })\n\n    if (!response.ok) {\n      const errorText = await response.text()\n      console.error(\"[v0] API error:\", response.status, errorText)\n      return new Response(JSON.stringify({ error: `AI ÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®: ${response.status}` }), {\n        status: response.status,\n        headers: { \"Content-Type\": \"application/json\" }\n      })\n    }\n\n    // ‚úÖ ÊôÆÈÄöÂØπËØùÂºÄÂßãÊµÅÂºè‰º†ËæìÂâçÔºåÊâßË°åÊâ£Ë¥π\n    await deductCredit()\n\n    const encoder = new TextEncoder()\n    const decoder = new TextDecoder()\n\n    const stream = new ReadableStream({\n      async start(controller) {\n        const reader = response.body?.getReader()\n        if (!reader) {\n          controller.close()\n          return\n        }\n        try {\n          let buffer = \"\"\n          while (true) {\n            const { done, value } = await reader.read()\n            if (done) break\n            const decoded = decoder.decode(value, { stream: true })\n            buffer += decoded\n            const lines = buffer.split(\"\\n\")\n            buffer = lines.pop() || \"\"\n            for (const line of lines) {\n              const trimmed = line.trim()\n              if (!trimmed || trimmed === \"data: [DONE]\") continue\n              if (trimmed.startsWith(\"data: \")) {\n                try {\n                   const jsonStr = trimmed.slice(6)\n                   const data = JSON.parse(jsonStr)\n                   if (data.choices && data.choices[0]?.delta?.content) {\n                     const content = data.choices[0].delta.content\n                     const aiSDKChunk = `0:${JSON.stringify({ type: \"text-delta\", textDelta: content })}\\n`\n                     controller.enqueue(encoder.encode(aiSDKChunk))\n                   }\n                } catch (e) {}\n              }\n            }\n          }\n          controller.close()\n        } catch (error) {\n          controller.error(error)\n        }\n      },\n    })\n\n    return new Response(stream, {\n      headers: {\n        \"Content-Type\": \"text/plain; charset=utf-8\",\n        \"X-Vercel-AI-Data-Stream\": \"v1\",\n        \"Cache-Control\": \"no-cache\",\n        Connection: \"keep-alive\",\n        'Access-Control-Allow-Origin': '*',\n      },\n    })\n  } catch (error) {\n    console.error(\"[v0] Chat API error:\", error)\n    return new Response(JSON.stringify({ error: \"Internal server error\" }), {\n      status: 500,\n      headers: { \"Content-Type\": \"application/json\" }\n    })\n  }\n}"],"names":[],"mappings":"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","debugId":null}}]
}