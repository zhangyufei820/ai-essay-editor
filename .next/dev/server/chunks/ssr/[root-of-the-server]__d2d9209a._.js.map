{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/aixingren/ai-essay-editor/lib/stripe.ts"],"sourcesContent":["import \"server-only\"\n\nimport Stripe from \"stripe\"\n\nexport const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!)\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAEO,MAAM,SAAS,IAAI,iKAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB","debugId":null}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Users/aixingren/ai-essay-editor/lib/products.ts"],"sourcesContent":["export interface Product {\n  id: string\n  name: string\n  description: string\n  priceInCents: number // 价格（单位：分）\n  features: string[]\n  popular?: boolean\n}\n\n// 产品目录 - 所有价格的唯一真实来源\n// [!!!] 修复：这里的 ID 必须与 pricing.tsx 中的 ID 完全匹配 [!!!]\nexport const PRODUCTS: Product[] = [\n  // --- 订阅方案 (来自 pricing.tsx) ---\n  {\n    id: \"basic\",\n    name: \"基础版\",\n    description: \"适合入门体验\",\n    priceInCents: 2800, // 28 元 * 100\n    features: [\"每月 2,000 积分\", \"调用所有 AI 模型\", \"标准生成速度\", \"社区支持\", \"调用专业智能体\"],\n  },\n  {\n    id: \"pro\",\n    name: \"专业版\",\n    description: \"适合高频学生\",\n    priceInCents: 6800, // 68 元 * 100\n    features: [\n      \"每月 5,000 积分\",\n      \"调用所有 AI 模型\",\n      \"优先生成速度\",\n      \"高级润色工具\",\n      \"名师辅导 (1次/月)\",\n      \"调用专业智能体\",\n    ],\n    popular: true,\n  },\n  {\n    id: \"premium\",\n    name: \"豪华版\",\n    description: \"适合重度用户/教育者\",\n    priceInCents: 12800, // 128 元 * 100\n    features: [\n      \"每月 12,000 积分\",\n      \"调用三大顶尖模型\",\n      \"最高优先速度\",\n      \"高级润色工具\",\n      \"名师辅导 (2次/月)\",\n      \"无限次 AI 对话\",\n      \"调用专业智能体\",\n    ],\n  },\n\n  // --- 积分充值包 (来自 pricing.tsx) ---\n  {\n    id: \"credits-500\",\n    name: \"500 积分充值包\",\n    description: \"永久有效，适合轻度或测试用户\",\n    priceInCents: 500, // 5 元 * 100\n    features: [\"500 积分\", \"永久有效\", \"可用于生成作文或兑换辅导\"],\n  },\n  {\n    id: \"credits-1000\",\n    name: \"1000 积分充值包\",\n    description: \"永久有效，适合轻度或测试用户\",\n    priceInCents: 1000, // 10 元 * 100\n    features: [\"1000 积分\", \"永久有效\", \"可用于生成作文或兑换辅导\"],\n  },\n  {\n    id: \"credits-5000\",\n    name: \"5000 积分充值包\",\n    description: \"永久有效 (96折优惠)\",\n    priceInCents: 4800, // 48 元 * 100\n    features: [\"5000 积分\", \"永久有效\", \"可用于生成作文或兑换辅导\"],\n  },\n  {\n    id: \"credits-10000\",\n    name: \"10000 积分充值包\",\n    description: \"永久有效 (9折优惠)\",\n    priceInCents: 9000, // 90 元 * 100\n    features: [\"10000 积分\", \"永久有效\", \"可用于生成作文或兑换辅导\"],\n  },\n]"],"names":[],"mappings":";;;;AAWO,MAAM,WAAsB;IACjC,gCAAgC;IAChC;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAe;YAAc;YAAU;YAAQ;SAAU;IACtE;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,SAAS;IACX;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;YACA;SACD;IACH;IAEA,iCAAiC;IACjC;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAU;YAAQ;SAAe;IAC9C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAW;YAAQ;SAAe;IAC/C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAW;YAAQ;SAAe;IAC/C;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;YAAC;YAAY;YAAQ;SAAe;IAChD;CACD","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///Users/aixingren/ai-essay-editor/app/actions/stripe.ts"],"sourcesContent":["\"use server\"\n\nimport { stripe } from \"@/lib/stripe\"\nimport { PRODUCTS } from \"@/lib/products\"\n\nexport async function startCheckoutSession(productId: string) {\n  if (!stripe) {\n    throw new Error(\"Stripe 未配置，请使用其他支付方式\")\n  }\n\n  const product = PRODUCTS.find((p) => p.id === productId)\n\n  if (!product) {\n    throw new Error(`产品 \"${productId}\" 不存在`)\n  }\n\n  if (product.priceInCents === 0) {\n    throw new Error(\"免费产品无需支付\")\n  }\n\n  try {\n    // 创建Stripe结账会话，支持多种支付方式\n    const session = await stripe.checkout.sessions.create({\n      ui_mode: \"embedded\",\n      redirect_on_completion: \"never\",\n      line_items: [\n        {\n          price_data: {\n            currency: \"cny\", // 使用人民币\n            product_data: {\n              name: product.name,\n              description: product.description,\n            },\n            unit_amount: product.priceInCents,\n          },\n          quantity: 1,\n        },\n      ],\n      mode: \"payment\",\n      payment_method_types: [\"card\"],\n    })\n\n    return session.client_secret\n  } catch (error: any) {\n    console.error(\"[v0] Stripe session creation error:\", error)\n    throw new Error(error?.message || \"创建支付会话失败\")\n  }\n}\n\nexport async function getPaymentStatus(sessionId: string) {\n  if (!stripe) {\n    throw new Error(\"Stripe 未配置\")\n  }\n\n  const session = await stripe.checkout.sessions.retrieve(sessionId)\n  return {\n    status: session.status,\n    payment_status: session.payment_status,\n    customer_email: session.customer_details?.email,\n  }\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;;AAEO,eAAe,qBAAqB,SAAiB;IAC1D,IAAI,CAAC,uHAAM,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,2HAAQ,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAE9C,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE,UAAU,KAAK,CAAC;IACzC;IAEA,IAAI,QAAQ,YAAY,KAAK,GAAG;QAC9B,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,wBAAwB;QACxB,MAAM,UAAU,MAAM,uHAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC;YACpD,SAAS;YACT,wBAAwB;YACxB,YAAY;gBACV;oBACE,YAAY;wBACV,UAAU;wBACV,cAAc;4BACZ,MAAM,QAAQ,IAAI;4BAClB,aAAa,QAAQ,WAAW;wBAClC;wBACA,aAAa,QAAQ,YAAY;oBACnC;oBACA,UAAU;gBACZ;aACD;YACD,MAAM;YACN,sBAAsB;gBAAC;aAAO;QAChC;QAEA,OAAO,QAAQ,aAAa;IAC9B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uCAAuC;QACrD,MAAM,IAAI,MAAM,OAAO,WAAW;IACpC;AACF;AAEO,eAAe,iBAAiB,SAAiB;IACtD,IAAI,CAAC,uHAAM,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,MAAM,uHAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC;IACxD,OAAO;QACL,QAAQ,QAAQ,MAAM;QACtB,gBAAgB,QAAQ,cAAc;QACtC,gBAAgB,QAAQ,gBAAgB,EAAE;IAC5C;AACF;;;IAvDsB;IA4CA;;AA5CA,+OAAA;AA4CA,+OAAA","debugId":null}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///Users/aixingren/ai-essay-editor/.next-internal/server/app/checkout/%5BproductId%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {startCheckoutSession as '401226c4cc1ee62bf54b8a46a33bbb7a18b46fd161'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}}]
}